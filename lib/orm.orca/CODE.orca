
def conn;

def set_conn(conn)
{
	..conn = conn;
}

def clear()
{
	#..conn.close();
}

def row_iter
{
	def model;
	def res;
	def keys := [];
	def instance {}

	def init(model, res) {
		..model = model;
		..res = res;
		for m in model.MEMBERS.begin() {
			..keys.push_back(m.first());
		}
	}

	def next() {
		..res.next();
		return owner;
	}

	# make value
	t = .instance.clone();

	for i in [0..my.keys.size()-1] {
		t.MEMBERS[.keys[i]] = .res()[i];
	}

	return t;
}




